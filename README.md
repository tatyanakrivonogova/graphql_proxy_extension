# graphql_proxy_extension
GraphQL-extension for PostgresQL

# Общая задача
Заказчик использует приложения с GraphQL. GraphQL API - интерфейс обращения к базам данных(БД), поэтому необходимая информация может храниться где угодно и как угодно, кроме того, может быть распределена по разным местам. GraphQL является для клиента очень удобным средством взаимодействия с БД и позволяет за один запрос отправлять и получать данные, необходимые и достаточные для корректной работы приложения.\
В определенный момент заказчик понимает, что текущая БД  перестает удовлетворять его требованиям и решает перейти на другую, например PostgreSQL, но переписывать всю логику работу с данными трудозатратно. Таким образом, возникает необходимость в прокси GraphQL - PostgreSQL.\
Решением проблемы может выступать расширение PostgreSQL, запускающее данный прокси-сервер. Он должен вести себя так, чтобы пользовательское приложение не заметило подмены. Т.е. необходимо соблюдение спецификации GraphQL: https://spec.graphql.org/draft/

# Требования
1. Преобразование GraphQL-запросов в запросы, которые понимает Postgres
2. Парсинг GraphQL-запросов
3. Хранение актуальной GraphQL-схемы данных
4. Валидация приходящих от клиентов запросов в соответствии с текущей схемой данных
5. Преобразование схемы данных в базе Postgres в схему для GraphQL
6. Сохранение главного принципа GraphQL API - мы должны за один запрос отдавать все необходимые данные и не отдавать ничего лишнего
7. Преобразование результата выполнения запроса в json-формат
8. Правильная обработка ошибок (GraphQL отдает ошибки в виде json-а)
9. Одновременная обработка многих клиентов


# Запуск
```bash
gcc client.c -o client
./client 127.0.0.1 7879
```

Пример HTTP-запроса:
```GraphQL
GET /query HTTP/1.0
Content-Length: 0

query findVideos {
  videos {
    id
    title
    url
    author {
      id
      name
    }
  }
}
```
CTRL-D

Сервер отправляет обратно клиенту тело HTTP-запроса, на стороне клиента ответ сохраняется в файле response.
В логах сервера можно посмотреть, во что распарсился HTTP-запрос: метод, ресурс, версия протокола, количество заголовков, их имена и значения, тело запроса (если есть).
